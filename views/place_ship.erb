<!doctype html>
<head>
  <script src="/js/main.js"></script>

</head>
<body>
    <h2>Welcome to the Game, <%= @player1_name %>!</h2>
<h3>Let's Begin by Placing Your Ships.</h3>

<h3><div class="player1"></div></h3>
  
  <% board_layout = @player1_grid %>
  <% row_label = @grid_columns %>
  <% column_label = @grid_rows %>
 
    <div id="ship_selection">
      <div id="shipyard">
        Destroyer<div name="destroyer" class="ship" id="destroyer" draggable="true" ondragstart="dragStart(event)"></div>
        <div class="spacer"> </div>
        Battleship<div name="battleship" class="ship" id="battleship" draggable="true" ondragstart="dragStart(event)"></div>
        <div class="spacer"> </div>
        Cruiser<div name="cruiser" class="ship" id="cruiser" draggable="true" ondragstart="dragStart(event)"></div>
        <div class="spacer"> </div>
       Submarine <div name="submarine" class="ship" id="submarine" draggable="true" ondragstart="dragStart(event)"></div>
      </div>
    </div>
<form method="post" action="/all_ships_placed.erb">
    <div >
      <table class="board">
            <tr>
            <th> </th>
            <% row_label.each do |v|%>
          <th><%= v %></th>
            <% end %>
            </tr>
          
      
            <% board_layout.each_with_index do |v, i| %>
              <tr>
                <th><%= "#{column_label[i]}" %></th>
                <% v.each do |v| %>
                  <% v %>
        <td class="droppable" ondragover="allowDrop(event)" ondrop="drop(event)" name="cell_coordinates" id="['<%= v.row %>', '<%= v.column %>']"><%= v.render_with_ships %></td>                     
      <% end %>
      </tr> 
    <% end %>    
        </table>  
      </div>
  </div>   
 </div>
   

     



 <button>Submit</button>
</form>
 
</body>
<footer>
 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>
<script>
 // change orientation
    $('.ship').dblclick(function () {

      var ship_id = $(this).attr("id");
      var height = $(this).css("height");
      var width = $(this).css("width");

      ship_id = ship_id.charAt(ship_id.length - 1 ) == 'V' ? ship_id.slice(0, -1) : ship_id + "V";

      $(this).css("height", width);
      $(this).css("width", height);
      $(this).attr("id", ship_id);

    });
  </script>

</footer>